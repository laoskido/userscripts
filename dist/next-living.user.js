// ==UserScript==
// @name        Next Living
// @version     1.2.1
// @author      Khoi-Phong Le
// @description theNextLiving
// @homepage    https://next.voz.vn/threads/userscript-sticker-cho-next.854/
// @supportURL  https://github.com/phonglk/userscripts/pulls
// @match       https://*.voz.vn/*
// @namespace   Next
// @updateURL   https://github.com/laoskido/userscripts/blob/master/dist/next-living.user.js
// @connect     imgur.com
// @source      https://github.com/phonglk/userscripts/tree/master/src/next/living
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_deleteValue
// @grant       GM_listValues
// @grant       GM_notification
// @grant       GM_xmlhttpRequest
// @grant       GM_addValueChangeListener
// @grant       GM_removeValueChangeListener
// @grant       GM_log
// ==/UserScript==

!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=7)}([function(t,n,e){!function(){"use strict";var n={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function e(t,n){try{return t(n)}catch(t){return n}}var r=document,i=window,o=r.documentElement,a=r.createElement.bind(r),u=a("div"),s=a("table"),l=a("tbody"),c=a("tr"),f=Array.isArray,p=Array.prototype,d=p.concat,h=p.filter,_=p.indexOf,m=p.map,g=p.push,v=p.slice,b=p.some,y=p.splice,x=/^#[\w-]*$/,k=/^\.[\w-]*$/,C=/<.+>/,w=/^\w+$/;function N(t,n){return t&&(H(n)||W(n))?k.test(t)?n.getElementsByClassName(t.slice(1)):w.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t):[]}var S=function(){function t(t,n){if(t){if(j(t))return t;var e=t;if(O(t)){var o=(j(n)?n[0]:n)||r;if(!(e=x.test(t)?o.getElementById(t.slice(1)):C.test(t)?Tt(t):N(t,o)))return}else if(D(t))return this.ready(t);(e.nodeType||e===i)&&(e=[e]),this.length=e.length;for(var a=0,u=this.length;a<u;a++)this[a]=e[a]}}return t.prototype.init=function(n,e){return new t(n,e)},t}(),E=S.prototype,T=E.init;T.fn=T.prototype=E,E.length=0,E.splice=y,"function"==typeof Symbol&&(E[Symbol.iterator]=p[Symbol.iterator]),E.map=function(t){return T(d.apply([],m.call(this,(function(n,e){return t.call(n,e,n)}))))},E.slice=function(t,n){return T(v.call(this,t,n))};var M=/-([a-z])/g;function P(t){return t.replace(M,(function(t,n){return n.toUpperCase()}))}function A(t,n,e){if(e){for(var r=t.length;r--;)if(!1===n.call(t[r],r,t[r]))return t}else{r=0;for(var i=t.length;r<i;r++)if(!1===n.call(t[r],r,t[r]))return t}return t}function L(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=arguments.length;if(!r)return{};if(1===r)return L(T,t);for(var i=1;i<r;i++)for(var o in arguments[i])t[o]=arguments[i][o];return t}function $(t,n){var e=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!e&&!!n&&e.call(t,n)}function j(t){return t instanceof S}function R(t){return!!t&&t===t.window}function H(t){return!!t&&9===t.nodeType}function W(t){return!!t&&1===t.nodeType}function D(t){return"function"==typeof t}function O(t){return"string"==typeof t}function U(t){return void 0===t}function I(t){return null===t}function B(t){return!isNaN(parseFloat(t))&&isFinite(t)}function F(t){return O(t)?function(n,e){return $(e,t)}:D(t)?t:j(t)?function(n,e){return t.is(e)}:t?function(n,e){return e===t}:function(){return!1}}function G(t,n){return n?t.filter(n):t}T.each=A,E.each=function(t){return A(this,t)},E.removeProp=function(t){return this.each((function(e,r){delete r[n[t]||t]}))},T.extend=L,E.extend=function(t){return L(E,t)},T.guid=1,T.isWindow=R,T.isFunction=D,T.isNumeric=B,T.isArray=f,E.prop=function(t,e){if(t){if(O(t))return t=n[t]||t,arguments.length<2?this[0]&&this[0][t]:this.each((function(n,r){r[t]=e}));for(var r in t)this.prop(r,t[r]);return this}},E.get=function(t){return U(t)?v.call(this):this[(t=Number(t))<0?t+this.length:t]},E.eq=function(t){return T(this.get(t))},E.first=function(){return this.eq(0)},E.last=function(){return this.eq(-1)},E.filter=function(t){var n=F(t);return T(h.call(this,(function(t,e){return n.call(t,e,t)})))};var V=/\S+/g;function z(t){return O(t)&&t.match(V)||[]}function q(t,n,e,r){for(var i=[],o=D(n),a=r&&F(r),u=0,s=t.length;u<s;u++)if(o){var l=n(t[u]);l.length&&g.apply(i,l)}else for(var c=t[u][n];!(null==c||r&&a(-1,c));)i.push(c),c=e?c[n]:null;return i}function J(t){return t.length>1?h.call(t,(function(t,n,e){return _.call(e,t)===n})):t}function K(t,n,e){if(W(t)){var r=i.getComputedStyle(t,null);return e?r.getPropertyValue(n)||void 0:r[n]}}function X(t,n){return parseInt(K(t,n),10)||0}E.hasClass=function(t){return!!t&&b.call(this,(function(n){return W(n)&&n.classList.contains(t)}))},E.removeAttr=function(t){var n=z(t);return this.each((function(t,e){W(e)&&A(n,(function(t,n){e.removeAttribute(n)}))}))},E.attr=function(t,n){if(t){if(O(t)){if(arguments.length<2){if(!this[0]||!W(this[0]))return;var e=this[0].getAttribute(t);return I(e)?void 0:e}return U(n)?this:I(n)?this.removeAttr(t):this.each((function(e,r){W(r)&&r.setAttribute(t,n)}))}for(var r in t)this.attr(r,t[r]);return this}},E.toggleClass=function(t,n){var e=z(t),r=!U(n);return this.each((function(t,i){W(i)&&A(e,(function(t,e){r?n?i.classList.add(e):i.classList.remove(e):i.classList.toggle(e)}))}))},E.addClass=function(t){return this.toggleClass(t,!0)},E.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr("class","")},T.unique=J,E.add=function(t,n){return T(J(this.get().concat(T(t,n).get())))};var Y=/^--/;function Q(t){return Y.test(t)}var Z={},tt=u.style,nt=["webkit","moz","ms"];function et(t,n){if(void 0===n&&(n=Q(t)),n)return t;if(!Z[t]){var e=P(t),r=""+e[0].toUpperCase()+e.slice(1);A((e+" "+nt.join(r+" ")+r).split(" "),(function(n,e){if(e in tt)return Z[t]=e,!1}))}return Z[t]}var rt={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function it(t,n,e){return void 0===e&&(e=Q(t)),e||rt[t]||!B(n)?n:n+"px"}E.css=function(t,n){if(O(t)){var e=Q(t);return t=et(t,e),arguments.length<2?this[0]&&K(this[0],t,e):t?(n=it(t,n,e),this.each((function(r,i){W(i)&&(e?i.style.setProperty(t,n):i.style[t]=n)}))):this}for(var r in t)this.css(r,t[r]);return this};var ot=/^\s+|\s+$/;function at(t,n){var r=t.dataset[n]||t.dataset[P(n)];return ot.test(r)?r:e(JSON.parse,r)}function ut(t,n,r){r=e(JSON.stringify,r),t.dataset[P(n)]=r}function st(t,n){var e=t.documentElement;return Math.max(t.body["scroll"+n],e["scroll"+n],t.body["offset"+n],e["offset"+n],e["client"+n])}function lt(t,n){return X(t,"border"+(n?"Left":"Top")+"Width")+X(t,"padding"+(n?"Left":"Top"))+X(t,"padding"+(n?"Right":"Bottom"))+X(t,"border"+(n?"Right":"Bottom")+"Width")}E.data=function(t,n){if(!t){if(!this[0])return;var e={};for(var r in this[0].dataset)e[r]=at(this[0],r);return e}if(O(t))return arguments.length<2?this[0]&&at(this[0],t):U(n)?this:this.each((function(e,r){ut(r,t,n)}));for(var r in t)this.data(r,t[r]);return this},A([!0,!1],(function(t,n){A(["Width","Height"],(function(t,e){E[(n?"outer":"inner")+e]=function(r){if(this[0])return R(this[0])?n?this[0]["inner"+e]:this[0].document.documentElement["client"+e]:H(this[0])?st(this[0],e):this[0][(n?"offset":"client")+e]+(r&&n?X(this[0],"margin"+(t?"Top":"Left"))+X(this[0],"margin"+(t?"Bottom":"Right")):0)}}))})),A(["Width","Height"],(function(t,n){var e=n.toLowerCase();E[e]=function(r){if(!this[0])return U(r)?void 0:this;if(!arguments.length)return R(this[0])?this[0].document.documentElement["client"+n]:H(this[0])?st(this[0],n):this[0].getBoundingClientRect()[e]-lt(this[0],!t);var i=parseInt(r,10);return this.each((function(n,r){if(W(r)){var o=K(r,"boxSizing");r.style[e]=it(e,i+("border-box"===o?lt(r,!t):0))}}))}}));var ct={};function ft(t){return"none"===K(t,"display")}function pt(t,n){return!n||!b.call(n,(function(n){return t.indexOf(n)<0}))}E.toggle=function(t){return this.each((function(n,e){W(e)&&((U(t)?ft(e):t)?(e.style.display=e.___cd||"",ft(e)&&(e.style.display=function(t){if(ct[t])return ct[t];var n=a(t);r.body.insertBefore(n,null);var e=K(n,"display");return r.body.removeChild(n),ct[t]="none"!==e?e:"block"}(e.tagName))):(e.___cd=K(e,"display"),e.style.display="none"))}))},E.hide=function(){return this.toggle(!1)},E.show=function(){return this.toggle(!0)};var dt={focus:"focusin",blur:"focusout"},ht={mouseenter:"mouseover",mouseleave:"mouseout"},_t=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function mt(t){return ht[t]||dt[t]||t}function gt(t){return t.___ce=t.___ce||{}}function vt(t){var n=t.split(".");return[n[0],n.slice(1).sort()]}function bt(t,n,e,r,i){var o=gt(t);if(n)o[n]&&(o[n]=o[n].filter((function(o){var a=o[0],u=o[1],s=o[2];if(i&&s.guid!==i.guid||!pt(a,e)||r&&r!==u)return!0;t.removeEventListener(n,s)})));else for(n in o)bt(t,n,e,r,i)}function yt(t){return t.multiple&&t.options?q(h.call(t.options,(function(t){return t.selected&&!t.disabled&&!t.parentNode.disabled})),"value"):t.value||""}E.off=function(t,n,e){var r=this;if(U(t))this.each((function(t,n){(W(n)||H(n)||R(n))&&bt(n)}));else if(O(t))D(n)&&(e=n,n=""),A(z(t),(function(t,i){var o=vt(mt(i)),a=o[0],u=o[1];r.each((function(t,r){(W(r)||H(r)||R(r))&&bt(r,a,u,n,e)}))}));else for(var i in t)this.off(i,t[i]);return this},E.on=function(t,n,e,r,i){var o=this;if(!O(t)){for(var a in t)this.on(a,n,e,t[a],i);return this}return O(n)||(U(n)||I(n)?n="":U(e)?(e=n,n=""):(r=e,e=n,n="")),D(r)||(r=e,e=void 0),r?(A(z(t),(function(t,a){var u=vt(mt(a)),s=u[0],l=u[1];s&&o.each((function(t,o){if(W(o)||H(o)||R(o)){var a=function t(a){if(!a.namespace||pt(l,a.namespace.split("."))){var u=o;if(n){for(var c=a.target;!$(c,n);){if(c===o)return;if(!(c=c.parentNode))return}u=c,a.___cd=!0}a.___cd&&Object.defineProperty(a,"currentTarget",{configurable:!0,get:function(){return u}}),Object.defineProperty(a,"data",{configurable:!0,get:function(){return e}});var f=r.call(u,a,a.___td);i&&bt(o,s,l,n,t),!1===f&&(a.preventDefault(),a.stopPropagation())}};a.guid=r.guid=r.guid||T.guid++,function(t,n,e,r,i){var o=gt(t);o[n]=o[n]||[],o[n].push([e,r,i]),t.addEventListener(n,i)}(o,s,l,n,a)}}))})),this):this},E.one=function(t,n,e,r){return this.on(t,n,e,r,!0)},E.ready=function(t){var n=function(){return setTimeout(t,0,T)};return"loading"!==r.readyState?n():r.addEventListener("DOMContentLoaded",n),this},E.trigger=function(t,n){if(O(t)){var e=vt(t),i=e[0],o=e[1];if(!i)return this;var a=_t.test(i)?"MouseEvents":"HTMLEvents";(t=r.createEvent(a)).initEvent(i,!0,!0),t.namespace=o.join(".")}t.___td=n;var u=t.type in dt;return this.each((function(n,e){u&&D(e[t.type])?e[t.type]():e.dispatchEvent(t)}))};var xt=/%20/g,kt=/\r?\n/g;var Ct=/file|reset|submit|button|image/i,wt=/radio|checkbox/i;E.serialize=function(){var t="";return this.each((function(n,e){A(e.elements||[e],(function(n,e){if(!(e.disabled||!e.name||"FIELDSET"===e.tagName||Ct.test(e.type)||wt.test(e.type)&&!e.checked)){var r=yt(e);if(!U(r))A(f(r)?r:[r],(function(n,r){t+=function(t,n){return"&"+encodeURIComponent(t)+"="+encodeURIComponent(n.replace(kt,"\r\n")).replace(xt,"+")}(e.name,r)}))}}))})),t.slice(1)},E.val=function(t){return arguments.length?this.each((function(n,e){var r=e.multiple&&e.options;if(r||wt.test(e.type)){var i=f(t)?m.call(t,String):I(t)?[]:[String(t)];r?A(e.options,(function(t,n){n.selected=i.indexOf(n.value)>=0}),!0):e.checked=i.indexOf(e.value)>=0}else e.value=U(t)||I(t)?"":t})):this[0]&&yt(this[0])},E.clone=function(){return this.map((function(t,n){return n.cloneNode(!0)}))},E.detach=function(t){return G(this,t).each((function(t,n){n.parentNode&&n.parentNode.removeChild(n)})),this};var Nt=/^\s*<(\w+)[^>]*>/,St=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Et={"*":u,tr:l,td:c,th:c,thead:s,tbody:s,tfoot:s};function Tt(t){if(!O(t))return[];if(St.test(t))return[a(RegExp.$1)];var n=Nt.test(t)&&RegExp.$1,e=Et[n]||Et["*"];return e.innerHTML=t,T(e.childNodes).detach().get()}T.parseHTML=Tt,E.empty=function(){return this.each((function(t,n){for(;n.firstChild;)n.removeChild(n.firstChild)}))},E.html=function(t){return arguments.length?U(t)?this:this.each((function(n,e){W(e)&&(e.innerHTML=t)})):this[0]&&this[0].innerHTML},E.remove=function(t){return G(this,t).detach().off(),this},E.text=function(t){return U(t)?this[0]?this[0].textContent:"":this.each((function(n,e){W(e)&&(e.textContent=t)}))},E.unwrap=function(){return this.parent().each((function(t,n){if("BODY"!==n.tagName){var e=T(n);e.replaceWith(e.children())}})),this},E.offset=function(){var t=this[0];if(t){var n=t.getBoundingClientRect();return{top:n.top+i.pageYOffset,left:n.left+i.pageXOffset}}},E.offsetParent=function(){return this.map((function(t,n){for(var e=n.offsetParent;e&&"static"===K(e,"position");)e=e.offsetParent;return e||o}))},E.position=function(){var t=this[0];if(t){var n="fixed"===K(t,"position"),e=n?t.getBoundingClientRect():this.offset();if(!n){for(var r=t.ownerDocument,i=t.offsetParent||r.documentElement;(i===r.body||i===r.documentElement)&&"static"===K(i,"position");)i=i.parentNode;if(i!==t&&W(i)){var o=T(i).offset();e.top-=o.top+X(i,"borderTopWidth"),e.left-=o.left+X(i,"borderLeftWidth")}}return{top:e.top-X(t,"marginTop"),left:e.left-X(t,"marginLeft")}}},E.children=function(t){return G(T(J(q(this,(function(t){return t.children})))),t)},E.contents=function(){return T(J(q(this,(function(t){return"IFRAME"===t.tagName?[t.contentDocument]:"TEMPLATE"===t.tagName?t.content.childNodes:t.childNodes}))))},E.find=function(t){return T(J(q(this,(function(n){return N(t,n)}))))};var Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pt=/^$|^module$|\/(java|ecma)script/i,At=["type","src","nonce","noModule"];function Lt(t,n,e,r,i){r?t.insertBefore(n,e?t.firstChild:null):t.parentNode.insertBefore(n,e?t:t.nextSibling),i&&function(t,n){var e=T(t);e.filter("script").add(e.find("script")).each((function(t,e){if(Pt.test(e.type)&&o.contains(e)){var r=a("script");r.text=e.textContent.replace(Mt,""),A(At,(function(t,n){e[n]&&(r[n]=e[n])})),n.head.insertBefore(r,null),n.head.removeChild(r)}}))}(n,t.ownerDocument)}function $t(t,n,e,r,i,o,a,u){return A(t,(function(t,o){A(T(o),(function(t,o){A(T(n),(function(n,a){var u=e?a:o,s=e?t:n;Lt(e?o:a,s?u.cloneNode(!0):u,r,i,!s)}),u)}),a)}),o),n}E.after=function(){return $t(arguments,this,!1,!1,!1,!0,!0)},E.append=function(){return $t(arguments,this,!1,!1,!0)},E.appendTo=function(t){return $t(arguments,this,!0,!1,!0)},E.before=function(){return $t(arguments,this,!1,!0)},E.insertAfter=function(t){return $t(arguments,this,!0,!1,!1,!1,!1,!0)},E.insertBefore=function(t){return $t(arguments,this,!0,!0)},E.prepend=function(){return $t(arguments,this,!1,!0,!0,!0,!0)},E.prependTo=function(t){return $t(arguments,this,!0,!0,!0,!1,!1,!0)},E.replaceWith=function(t){return this.before(t).remove()},E.replaceAll=function(t){return T(t).replaceWith(this),this},E.wrapAll=function(t){for(var n=T(t),e=n[0];e.children.length;)e=e.firstElementChild;return this.first().before(n),this.appendTo(e)},E.wrap=function(t){return this.each((function(n,e){var r=T(t)[0];T(e).wrapAll(n?r.cloneNode(!0):r)}))},E.wrapInner=function(t){return this.each((function(n,e){var r=T(e),i=r.contents();i.length?i.wrapAll(t):r.append(t)}))},E.has=function(t){var n=O(t)?function(n,e){return N(t,e).length}:function(n,e){return e.contains(t)};return this.filter(n)},E.is=function(t){var n=F(t);return b.call(this,(function(t,e){return n.call(t,e,t)}))},E.next=function(t,n,e){return G(T(J(q(this,"nextElementSibling",n,e))),t)},E.nextAll=function(t){return this.next(t,!0)},E.nextUntil=function(t,n){return this.next(n,!0,t)},E.not=function(t){var n=F(t);return this.filter((function(e,r){return(!O(t)||W(r))&&!n.call(r,e,r)}))},E.parent=function(t){return G(T(J(q(this,"parentNode"))),t)},E.index=function(t){var n=t?T(t)[0]:this[0],e=t?this:T(n).parent().children();return _.call(e,n)},E.closest=function(t){var n=this.filter(t);if(n.length)return n;var e=this.parent();return e.length?e.closest(t):n},E.parents=function(t,n){return G(T(J(q(this,"parentElement",!0,n))),t)},E.parentsUntil=function(t,n){return this.parents(n,t)},E.prev=function(t,n,e){return G(T(J(q(this,"previousElementSibling",n,e))),t)},E.prevAll=function(t){return this.prev(t,!0)},E.prevUntil=function(t,n){return this.prev(n,!0,t)},E.siblings=function(t){return G(T(J(q(this,(function(t){return T(t).parent().children().not(t)})))),t)},t.exports=T}()},function(t,n,e){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),a=[];function u(t){for(var n=-1,e=0;e<a.length;e++)if(a[e].identifier===t){n=e;break}return n}function s(t,n){for(var e={},r=[],i=0;i<t.length;i++){var o=t[i],s=n.base?o[0]+n.base:o[0],l=e[s]||0,c="".concat(s," ").concat(l);e[s]=l+1;var f=u(c),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:c,updater:m(p,n),references:1}),r.push(c)}return r}function l(t){var n=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=e.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){n.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(n);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var c,f=(c=[],function(t,n){return c[t]=n,c.filter(Boolean).join("\n")});function p(t,n,e,r){var i=e?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(n,i);else{var o=document.createTextNode(i),a=t.childNodes;a[n]&&t.removeChild(a[n]),a.length?t.insertBefore(o,a[n]):t.appendChild(o)}}function d(t,n,e){var r=e.css,i=e.media,o=e.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var h=null,_=0;function m(t,n){var e,r,i;if(n.singleton){var o=_++;e=h||(h=l(n)),r=p.bind(null,e,o,!1),i=p.bind(null,e,o,!0)}else e=l(n),r=d.bind(null,e,n),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else i()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=i());var e=s(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<e.length;r++){var i=u(e[r]);a[i].references--}for(var o=s(t,n),l=0;l<e.length;l++){var c=u(e[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}e=o}}}},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",r=t[3];if(!r)return e;if(n&&"function"==typeof btoa){var i=(a=r,u=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([i]).join("\n")}var a,u,s;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var u=0;u<t.length;u++){var s=[].concat(t[u]);r&&i[s[0]]||(e&&(s[2]?s[2]="".concat(e," and ").concat(s[2]):s[2]=e),n.push(s))}},n}},function(t,n,e){var r=e(1),i=e(4);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1},a=(r(i,o),i.locals?i.locals:{});t.exports=a},function(t,n,e){(n=e(2)(!1)).push([t.i,"#ns {\n  margin-top: 10px;\n}\n#ns a.button {\n  display: inline-block;\n  text-decoration: none;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 2px;\n  cursor: pointer;\n  min-width: auto;\n  border-radius: 0;\n}\n#ns .btn-add {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n#ns .btn-sticker {\n  margin-left: 3px;\n}\n#ns .sticker-wrapper {\n  background: white;\n  height: 200px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n  transition: all 0.3s;\n}\n#ns .sticker-img {\n  border: 1px solid transparent;\n  transition: all 0.3s;\n  cursor: pointer;\n  display: inline-block;\n}\n#ns .sticker-img:hover {\n  border: 1px solid rgba(0, 0, 0, 0.5);\n}\n",""]),t.exports=n},function(t,n,e){var r=e(1),i=e(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1},a=(r(i,o),i.locals?i.locals:{});t.exports=a},function(t,n,e){(n=e(2)(!1)).push([t.i,"@media (max-width: 768px) {\n  .p-body {\n    padding-top: 30px;\n  }\n  .next-navigation {\n    display: block !important;\n  }\n}\n.next-navigation {\n  display: none;\n  width: 100%;\n  height: 30px;\n  position: fixed;\n  left: 0;\n  top: 50px;\n  background: #303e4c;\n}\n.next-navigation .pageNavSimple {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n}\n.next-navigation .pageNavSimple > a {\n  flex: 1 1 auto;\n  margin: 0;\n  padding: 2px 3px;\n  min-width: auto;\n  height: 100%;\n  background: none;\n  color: white;\n}\n",""]),t.exports=n},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"set",(function(){return v})),e.d(r,"get",(function(){return b})),e.d(r,"del",(function(){return y})),e.d(r,"list",(function(){return x})),e.d(r,"onChange",(function(){return k})),e.d(r,"update",(function(){return C})),e.d(r,"val",(function(){return w}));var i=e(0),o=e.n(i);function a(t){var n,e;(n=document.getElementsByTagName("head")[0])&&((e=document.createElement("link")).type="text/css",e.rel="stylesheet",e.href=t,n.appendChild(e))}const u={RIGHT:39,LEFT:37,UP:8},s=()=>o()(".pageNavWrapper .pageNav-jump.pageNav-jump--prev"),l=()=>o()(".pageNavWrapper .pageNav-jump.pageNav-jump--next"),c=()=>o()(".pageNavWrapper .pageNav-page:last-child a"),f=()=>o()(".pageNavWrapper .pageNav-page:first-child a"),p=()=>o()('a[href="#top"]'),d={first:()=>{h(f())},last:()=>{h(c())},next:()=>{h(l())},prev:()=>{h(s())},up:()=>{h(p())}};function h(t){t[0].click()}function _(){m(l(),"Press -> to go to next page",{"data-microtip-position":"right"}),m(s(),"Press <- to go to previous page",{"data-microtip-position":"bottom-right"}),m(c(),"Press Ctrl/Cmd + -> to go to last page",{"data-microtip-position":"bottom-right"}),m(f(),"Press Ctrl/Cmd + <- to go to first page",{"data-microtip-position":"bottom-right"}),m(p(),"Press Ctrl/Cmd + ⬆ to go to top",{"data-microtip-position":"left"})}function m(t,n,e={}){t.attr({"data-microtip-position":"up",...e,"aria-label":n,role:"tooltip"})}const g=(t,n)=>new Promise((e,r)=>{GM_xmlhttpRequest({method:"GET",...n,url:t,onload:function(i){if(4===i.readyState&&200===i.status){if(n.doNotParse)return e(i.responseText);e(JSON.parse(i.responseText))}else r(new Error(`Cannot load url ${t}`))}})}),v=GM_setValue,b=GM_getValue,y=GM_deleteValue,x=GM_listValues,k=(t,n)=>{GM_addValueChangeListener(t,(t,e,r,i)=>n(r,i,e))},C=(t,n,e)=>{v(t,e(b(t,n)))},w=t=>({set:v.bind(null,t),get:b.bind(null,t),del:y.bind(null,t),update:C.bind(null,t),onChange:k.bind(null,t)}),N=[{title:"Đại sảnh",url:"/#dai-sanh.1",boxes:[{title:"Thông báo",url:"/f/thong-bao.2/"},{title:"Góp ý",url:"/f/gop-y.3/"}]},{title:"Khu vui chơi giải trí",url:"/#khu-vui-choi-giai-tri.16",boxes:[{title:"Chuyện trò linh tinh™",url:"/f/chuyen-tro-linh-tinh.17/"},{title:"Điểm báo",url:"/f/diem-bao.33/"}]}];function S(){const t=b("forum_structure",N);t===N&&async function(){const t=await g("https://next.voz.vn/",{doNotParse:!0}),n=o()(t).find(".block.block--category"),e=[];n.each((t,n)=>{const r=o()(n).find("h2 a"),i={title:r.text(),url:r.attr("href"),boxes:[]};o()(n).find("h3 a").each((t,n)=>{i.boxes.push({title:o()(n).text(),url:o()(n).attr("href")})}),e.push(i)}),v("forum_structure",e)}(),E(t),T(t),k("forum_structure",()=>{E(),T(t)}),((t,n,e)=>{const r={attributes:!1,childList:!1,subtree:!1,...n};var i=new MutationObserver(e);i.observe(t,r)})(document.body,{childList:!0},t=>{o()("#next-navigation-structure").length>0||t.forEach(t=>{t.addedNodes.forEach(t=>{if(t.classList&&t.classList.contains("offCanvasMenu--nav")){E(b("forum_structure",N))}})})})}function E(t){const n=o()(".offCanvasMenu-list > li:first-child"),e=`<li id="next-navigation-structure">\n      <div class="offCanvasMenu-linkHolder">\n        <a href="https://next.voz.vn" class="offCanvasMenu-link" data-xf-key="1" data-nav-id="home">Home</a>\n        <a class="offCanvasMenu-link offCanvasMenu-link--splitToggle" data-xf-click="toggle" data-target="< :up :next" role="button" tabindex="0"></a>\n      </div>\n      <ul class="offCanvasMenu-subList" style="" tabindex="-1">\n      ${t.map(({url:t,title:n,boxes:e})=>`\n        <li>\n          <a\n            href="${t}"\n            class="u-indentDepth0 js-offCanvasCopy offCanvasMenu-link"\n            data-nav-id="${n}"\n            >${n}</a>\n        </li>\n        ${e.map(({url:t,title:n})=>`<li>\n          <a\n            href="${t}"\n            class="u-indentDepth1 js-offCanvasCopy offCanvasMenu-link"\n            data-nav-id="${n}"\n            >${n}</a>\n        </li>`).join("\n")}\n      `).join("\n")}\n      </ul>\n    </li>`;n.replaceWith(o()(e))}function T(t){const n=o()(".p-nav-list li:first-child div"),e=`\n<div class="p-navEl" data-has-children="true">\n  <a href="/" class="p-navEl-link p-navEl-link--splitMenu " data-nav-id="home"\n    >Home</a\n  >\n  <a\n    data-xf-key="1"\n    data-xf-click="menu"\n    data-menu-pos-ref="< .p-navEl"\n    class="p-navEl-splitTrigger"\n    role="button"\n    tabindex="0"\n    aria-label="Toggle expanded"\n    aria-expanded="false"\n    aria-haspopup="true"\n  ></a>\n  <div class="menu menu--structural" data-menu="menu" aria-hidden="true">\n    <div class="menu-content">\n      ${t.map(({url:t,title:n,boxes:e})=>`\n        <a\n          href="${t}"\n          class="menu-linkRow u-indentDepth0 js-offCanvasCopy"\n          data-nav-id="${n}"\n          >${n}</a>\n        ${e.map(({url:t,title:n})=>`<li>\n          <a\n            href="${t}"\n            class="menu-linkRow u-indentDepth1 js-offCanvasCopy"\n            data-nav-id="${n}"\n            >${n}</a>\n        </li>`).join("\n")}\n      `).join("\n")}\n    </div>\n  </div>\n</div>\n  `;n.replaceWith(o()(e))}var M,P,A,L,$,j,R={},H=[],W=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function D(t,n){for(var e in n)t[e]=n[e];return t}function O(t){var n=t.parentNode;n&&n.removeChild(t)}function U(t,n,e){var r,i=arguments,o={};for(r in n)"key"!==r&&"ref"!==r&&(o[r]=n[r]);if(arguments.length>3)for(e=[e],r=3;r<arguments.length;r++)e.push(i[r]);if(null!=e&&(o.children=e),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===o[r]&&(o[r]=t.defaultProps[r]);return I(t,o,n&&n.key,n&&n.ref)}function I(t,n,e,r){var i={type:t,props:n,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return M.vnode&&M.vnode(i),i}function B(t){return t.children}function F(t,n){this.props=t,this.context=n}function G(t,n){if(null==n)return t.__?G(t.__,t.__.__k.indexOf(t)+1):null;for(var e;n<t.__k.length;n++)if(null!=(e=t.__k[n])&&null!=e.__e)return e.__e;return"function"==typeof t.type?G(t):null}function V(t){var n,e;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(e=t.__k[n])&&null!=e.__e){t.__e=t.__c.base=e.__e;break}return V(t)}}function z(t){(!t.__d&&(t.__d=!0)&&P.push(t)&&!A++||$!==M.debounceRendering)&&(($=M.debounceRendering)||L)(q)}function q(){for(var t;A=P.length;)t=P.sort((function(t,n){return t.__v.__b-n.__v.__b})),P=[],t.some((function(t){var n,e,r,i,o,a;t.__d&&(o=(i=(n=t).__v).__e,(a=n.__P)&&(e=[],r=Z(a,i,D({},i),n.__n,void 0!==a.ownerSVGElement,null,e,null==o?G(i):o),tt(e,i),r!=o&&V(i)))}))}function J(t,n,e,r,i,o,a,u,s){var l,c,f,p,d,h,_,m=e&&e.__k||H,g=m.length;if(u==R&&(u=null!=o?o[0]:g?G(e,0):null),l=0,n.__k=K(n.__k,(function(e){if(null!=e){if(e.__=n,e.__b=n.__b+1,null===(f=m[l])||f&&e.key==f.key&&e.type===f.type)m[l]=void 0;else for(c=0;c<g;c++){if((f=m[c])&&e.key==f.key&&e.type===f.type){m[c]=void 0;break}f=null}if(p=Z(t,e,f=f||R,r,i,o,a,u,s),(c=e.ref)&&f.ref!=c&&(_||(_=[]),f.ref&&_.push(f.ref,null,e),_.push(c,e.__c||p,e)),null!=p){var v;if(null==h&&(h=p),void 0!==e.__d)v=e.__d,e.__d=void 0;else if(o==f||p!=u||null==p.parentNode){t:if(null==u||u.parentNode!==t)t.appendChild(p),v=null;else{for(d=u,c=0;(d=d.nextSibling)&&c<g;c+=2)if(d==p)break t;t.insertBefore(p,u),v=u}"option"==n.type&&(t.value="")}u=void 0!==v?v:p.nextSibling,"function"==typeof n.type&&(n.__d=u)}else u&&f.__e==u&&u.parentNode!=t&&(u=G(f))}return l++,e})),n.__e=h,null!=o&&"function"!=typeof n.type)for(l=o.length;l--;)null!=o[l]&&O(o[l]);for(l=g;l--;)null!=m[l]&&rt(m[l],m[l]);if(_)for(l=0;l<_.length;l++)et(_[l],_[++l],_[++l])}function K(t,n,e){if(null==e&&(e=[]),null==t||"boolean"==typeof t)n&&e.push(n(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)K(t[r],n,e);else e.push(n?n("string"==typeof t||"number"==typeof t?I(null,t,null,null):null!=t.__e||null!=t.__c?I(t.type,t.props,t.key,null):t):t);return e}function X(t,n,e){"-"===n[0]?t.setProperty(n,e):t[n]="number"==typeof e&&!1===W.test(n)?e+"px":null==e?"":e}function Y(t,n,e,r,i){var o,a,u,s,l;if(i?"className"===n&&(n="class"):"class"===n&&(n="className"),"key"===n||"children"===n);else if("style"===n)if(o=t.style,"string"==typeof e)o.cssText=e;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(a in r)e&&a in e||X(o,a,"");if(e)for(u in e)r&&e[u]===r[u]||X(o,u,e[u])}else"o"===n[0]&&"n"===n[1]?(s=n!==(n=n.replace(/Capture$/,"")),l=n.toLowerCase(),n=(l in t?l:n).slice(2),e?(r||t.addEventListener(n,Q,s),(t.l||(t.l={}))[n]=e):t.removeEventListener(n,Q,s)):"list"!==n&&"tagName"!==n&&"form"!==n&&"type"!==n&&"size"!==n&&!i&&n in t?t[n]=null==e?"":e:"function"!=typeof e&&"dangerouslySetInnerHTML"!==n&&(n!==(n=n.replace(/^xlink:?/,""))?null==e||!1===e?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),e):null==e||!1===e&&!/^ar/.test(n)?t.removeAttribute(n):t.setAttribute(n,e))}function Q(t){this.l[t.type](M.event?M.event(t):t)}function Z(t,n,e,r,i,o,a,u,s){var l,c,f,p,d,h,_,m,g,v,b=n.type;if(void 0!==n.constructor)return null;(l=M.__b)&&l(n);try{t:if("function"==typeof b){if(m=n.props,g=(l=b.contextType)&&r[l.__c],v=l?g?g.props.value:l.__:r,e.__c?_=(c=n.__c=e.__c).__=c.__E:("prototype"in b&&b.prototype.render?n.__c=c=new b(m,v):(n.__c=c=new F(m,v),c.constructor=b,c.render=it),g&&g.sub(c),c.props=m,c.state||(c.state={}),c.context=v,c.__n=r,f=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=b.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=D({},c.__s)),D(c.__s,b.getDerivedStateFromProps(m,c.__s))),p=c.props,d=c.state,f)null==b.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==b.getDerivedStateFromProps&&m!==p&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,v),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,v)){for(c.props=m,c.state=c.__s,c.__d=!1,c.__v=n,n.__e=e.__e,n.__k=e.__k,c.__h.length&&a.push(c),l=0;l<n.__k.length;l++)n.__k[l]&&(n.__k[l].__=n);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,v),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(p,d,h)}))}c.context=v,c.props=m,c.state=c.__s,(l=M.__r)&&l(n),c.__d=!1,c.__v=n,c.__P=t,l=c.render(c.props,c.state,c.context),n.__k=null!=l&&l.type==B&&null==l.key?l.props.children:Array.isArray(l)?l:[l],null!=c.getChildContext&&(r=D(D({},r),c.getChildContext())),f||null==c.getSnapshotBeforeUpdate||(h=c.getSnapshotBeforeUpdate(p,d)),J(t,n,e,r,i,o,a,u,s),c.base=n.__e,c.__h.length&&a.push(c),_&&(c.__E=c.__=null),c.__e=!1}else n.__e=nt(e.__e,n,e,r,i,o,a,s);(l=M.diffed)&&l(n)}catch(t){M.__e(t,n,e)}return n.__e}function tt(t,n){M.__c&&M.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(t){t.call(n)}))}catch(t){M.__e(t,n.__v)}}))}function nt(t,n,e,r,i,o,a,u){var s,l,c,f,p,d=e.props,h=n.props;if(i="svg"===n.type||i,null!=o)for(s=0;s<o.length;s++)if(null!=(l=o[s])&&((null===n.type?3===l.nodeType:l.localName===n.type)||t==l)){t=l,o[s]=null;break}if(null==t){if(null===n.type)return document.createTextNode(h);t=i?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,h.is&&{is:h.is}),o=null}if(null===n.type)d!==h&&t.data!=h&&(t.data=h);else if(n!==e){if(null!=o&&(o=H.slice.call(t.childNodes)),c=(d=e.props||R).dangerouslySetInnerHTML,f=h.dangerouslySetInnerHTML,!u){if(d===R)for(d={},p=0;p<t.attributes.length;p++)d[t.attributes[p].name]=t.attributes[p].value;(f||c)&&(f&&c&&f.__html==c.__html||(t.innerHTML=f&&f.__html||""))}(function(t,n,e,r,i){var o;for(o in e)o in n||Y(t,o,null,e[o],r);for(o in n)i&&"function"!=typeof n[o]||"value"===o||"checked"===o||e[o]===n[o]||Y(t,o,n[o],e[o],r)})(t,h,d,i,u),n.__k=n.props.children,f||J(t,n,e,r,"foreignObject"!==n.type&&i,o,a,R,u),u||("value"in h&&void 0!==h.value&&h.value!==t.value&&(t.value=null==h.value?"":h.value),"checked"in h&&void 0!==h.checked&&h.checked!==t.checked&&(t.checked=h.checked))}return t}function et(t,n,e){try{"function"==typeof t?t(n):t.current=n}catch(t){M.__e(t,e)}}function rt(t,n,e){var r,i,o;if(M.unmount&&M.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||et(r,null,n)),e||"function"==typeof t.type||(e=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){M.__e(t,n)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&rt(r[o],n,e);null!=i&&O(i)}function it(t,n,e){return this.constructor(t,e)}function ot(t,n,e){var r,i,o;M.__&&M.__(t,n),i=(r=e===j)?null:e&&e.__k||n.__k,t=U(B,null,[t]),o=[],Z(n,(r?n:e||n).__k=t,i||R,R,void 0!==n.ownerSVGElement,e&&!r?[e]:i?null:H.slice.call(n.childNodes),o,e||R,r),tt(o,t)}M={__e:function(t,n){for(var e,r;n=n.__;)if((e=n.__c)&&!e.__)try{if(e.constructor&&null!=e.constructor.getDerivedStateFromError&&(r=!0,e.setState(e.constructor.getDerivedStateFromError(t))),null!=e.componentDidCatch&&(r=!0,e.componentDidCatch(t)),r)return z(e.__E=e)}catch(n){t=n}throw t}},F.prototype.setState=function(t,n){var e;e=this.__s!==this.state?this.__s:this.__s=D({},this.state),"function"==typeof t&&(t=t(e,this.props)),t&&D(e,t),null!=t&&this.__v&&(n&&this.__h.push(n),z(this))},F.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),z(this))},F.prototype.render=B,P=[],A=0,L="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,j=R;var at,ut,st,lt=[],ct=M.__r,ft=M.diffed,pt=M.__c,dt=M.unmount;function ht(t){M.__h&&M.__h(ut);var n=ut.__H||(ut.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function _t(t){return function(t,n,e){var r=ht(at++);return r.__c||(r.__c=ut,r.__=[e?e(n):xt(void 0,n),function(n){var e=t(r.__[0],n);r.__[0]!==e&&(r.__[0]=e,r.__c.setState({}))}]),r.__}(xt,t)}function mt(t,n){var e=ht(at++);yt(e.__H,n)&&(e.__=t,e.__H=n,ut.__H.__h.push(e))}function gt(){lt.some((function(t){if(t.__P)try{t.__H.__h.forEach(vt),t.__H.__h.forEach(bt),t.__H.__h=[]}catch(n){return M.__e(n,t.__v),!0}})),lt=[]}function vt(t){t.t&&t.t()}function bt(t){var n=t.__();"function"==typeof n&&(t.t=n)}function yt(t,n){return!t||n.some((function(n,e){return n!==t[e]}))}function xt(t,n){return"function"==typeof n?n(t):n}M.__r=function(t){ct&&ct(t),at=0,(ut=t.__c).__H&&(ut.__H.__h.forEach(vt),ut.__H.__h.forEach(bt),ut.__H.__h=[])},M.diffed=function(t){ft&&ft(t);var n=t.__c;if(n){var e=n.__H;e&&e.__h.length&&(1!==lt.push(n)&&st===M.requestAnimationFrame||((st=M.requestAnimationFrame)||function(t){var n,e=function(){clearTimeout(r),cancelAnimationFrame(n),setTimeout(t)},r=setTimeout(e,100);"undefined"!=typeof window&&(n=requestAnimationFrame(e))})(gt))}},M.__c=function(t,n){n.some((function(t){try{t.__h.forEach(vt),t.__h=t.__h.filter((function(t){return!t.__||bt(t)}))}catch(e){n.some((function(t){t.__h&&(t.__h=[])})),n=[],M.__e(e,t.__v)}})),pt&&pt(t,n)},M.unmount=function(t){dt&&dt(t);var n=t.__c;if(n){var e=n.__H;if(e)try{e.__.forEach((function(t){return t.t&&t.t()}))}catch(t){M.__e(t,n.__v)}}};const kt={"Default Popop":["adore.png","after_boom.png","ah.png","amazed.png","angry.png","bad_smelly.png","baffle.png","beat_brick.png","beat_plaster.png","beat_shot.png","beated.png","beauty.png","big_smile.png","boss.png","burn_joss_stick.png","byebye.png","canny.png","choler.png","cold.png","confident.png","confuse.png","cool.png","cry.png","doubt.png","dribble.png","embarrassed.png","extreme_sexy_girl.png","feel_good.png","go.png","haha.png","hell_boy.png","hungry.png","look_down.png","matrix.png","misdoubt.png","nosebleed.png","oh.png","ops.png","pudency.png","rap.png","sad.png","sexy_girl.png","shame.png","smile.png","spiderman.png","still_dreaming.png","sure.png","surrender.png","sweat.png","sweet_kiss.png","tire.png","too_sad.png","waaaht.png","what.png"].map(t=>`/styles/next/xenforo/smilies/popopo/${t}`),"Vozer Popo":"https://imgur.com/a/0sWVa",Pepe:"https://imgur.com/a/pJX70wR"};const Ct=atob("VGxSRmVscFhSVE5OUkdzMVdWZEplbGxYVG1rPQ=="),wt=t=>`sticker_set_${t}`;function Nt(){const[t,n]=_t(!0),[e,r]=_t([]),[i,a]=_t(b(Et,null));mt(()=>{k(Et,(t,n)=>{n||a(t)})},[]),mt(()=>{n(!0),async function(t){let n=b(wt(t),null);if(null===n){const e=t.match(/a\/([^ ]*)/)[1];n=await async function(t){return(await g(`https://api.imgur.com/3/album/${t}/images`,{headers:{Authorization:`Client-ID ${Ct}`,Accept:"application/json"}})).data.map(({link:t})=>t)}(e),v(wt(t),n)}return n}(i).then(t=>{r(t),n(!1)}).catch(()=>{r([]),n(!1)})},[i]);const u=t=>{!function(t){const n=window.getSelection();let e=o()(`<img src="${t}" />`)[0];e=function(t,n){if(n.startsWith("/styles/next/xenforo/smilies/popopo/")){const t=n.split("/").slice(-1)[0];return o()(`<img src="${n}" class="smilie fr-fic fr-dii" alt=":${t.substring(0,t.lastIndexOf("."))}:"/>`)[0]}return t}(e,t);const r=o()("div.fr-view[contenteditable=true] > *"),i=3===n.anchorNode.nodeType?n.anchorNode.parentElement:n.anchorNode;if(n.getRangeAt&&n.rangeCount&&i.matches("div[contenteditable=true] *")){const t=n.getRangeAt(0);t.deleteContents(),t.insertNode(e),n.modify("move","right","character")}else r.length>0&&r.last()[0].appendChild(e)}(t)},s=U("div",{className:"sticker-wrapper"},e.map(t=>U("div",{key:t,className:"sticker-img",onClick:()=>u(t)},U("img",{src:t}))));return U("div",{className:"sticker-panel"},U("div",{className:"sticker-panel-toolbar"},U("a",{className:"button btn-delete",onClick:async()=>{y(wt(i)),C(St,[],t=>t.filter(({url:t})=>t!==i))},"aria-label":"Delete current sticker set",role:"tooltip","data-microtip-position":"right"},"Delete"),U("a",{className:"button btn-rename",onClick:async()=>{console.log(i);const t=prompt("What is the new name of this sticker set?",i.match(/[^/]*$/));t.trim()&&C(St,[],n=>n.map(n=>n.url!==i?n:{...n,name:t}))},"aria-label":"Change name of current sticker set",role:"tooltip","data-microtip-position":"right"},"Rename")),t&&"Loading sticker ...",!t&&0===e.length&&"Cannot load sticker set or empty",e.length>0&&s)}const St="sticker_set_list",Et="selected_sticker_set";function Tt(){const[t,n]=_t(b(St,[])),[e,i]=_t(b(Et,null)),o=t=>{i(t),v(Et,t)};return mt(()=>{k(St,n),k(Et,(t,n)=>{n||i(t)}),function(t,n,e){t.update(n,[],n=>(Object.keys(kt).reverse().forEach(r=>{if(!n.find(t=>r===t.name)){const i=kt[r];"string"==typeof i?n.unshift({name:r,url:i}):(n.unshift({name:r,url:r}),t.set(e(r),i))}}),n))}(r,St,wt)},[]),mt(()=>{!t.find(({url:t})=>t===e)&&t.length>0&&o(t[0].url)},[t,e]),U("div",null,U("a",{className:"button",href:"https://next.voz.vn/threads/tap-hop-userscript-huu-dung-cho-next-sticker-navigation.854/#post-39483",target:"_blank","aria-label":"Sticker Collection",role:"tooltip","data-microtip-position":"bottom-left"},"Stickers"),U("a",{className:"btn-add button button--primary",onClick:()=>{const{url:t,name:n}=function(){let t=prompt("imgur album url or id","https://imgur.com/a/");t.startsWith("http")||(t="https://imgur.com/a/"+t);const n=t.match(/a\/([^ ]*)/)[1],e=prompt("Sticker name",n);return{url:t,name:e}}();C(St,[],e=>e.concat({url:t,name:n})),o(t)},"aria-label":"Add Sticker by Imgur URL/ID",role:"tooltip","data-microtip-position":"bottom-left"},"Add Sticker"),U("span",{className:"ss-list"},t.map(({url:t,name:n})=>U("a",{className:`button btn-sticker ${e===t?"button--primary":"button--link"}`,onClick:()=>o(t)},n))))}function Mt(t){return new Promise(n=>{GM_notification(t,n)})}e(3);const Pt=o()(".js-previewContainer").length?".js-previewContainer":".message-editorWrapper .formButtonGroup";function At(){return U("div",null,U(Nt,null),U(Tt,null))}o()(()=>a("https://unpkg.com/microtip/microtip.css")),function(){const t=function(){if(0===o()(Pt).length)return;let t=o()("#ns");return t.length>0||(t=o()('<div id="ns"></div>'),t.insertBefore(Pt)),t[0]}();t&&ot(U(At,null),t)}(),o()('iframe[src*="://imgur.com/a/"]').add('a[href*="://imgur.com/a/"]').each((t,n)=>{const e=n.src||n.href;n.parentElement.classList.contains("imgur-embed-pub")&&(n=n.parentElement.parentElement);const r=n.previousSibling,i=r.textContent;if(i.length>20)return;const a=o()(`<a class="button button--link">Add Sticker ${i}</a>`);o()(r).replaceWith(a),a.on("click",()=>{let t=i.trim();0===t.length&&(t=prompt("What should be the name for this sticket set",e.match(/[^/]*$/))),t?function(t,n){C(St,[],e=>e.concat({name:n,url:t})),Mt({text:`Added ${n} from ${t}`,title:"Add Sticker",timeout:4e3})}(e.trim(),t):Mt({text:"The action is canceled",title:"Add Sticker",timeout:4e3})})});e(5);o()(()=>{a("https://unpkg.com/microtip/microtip.css"),o()(document).on("keydown",t=>{if("INPUT"==t.target.tagName||"TEXTAREA"==t.target.tagName||t.target.matches(".message-editorWrapper *")||t.target.matches(".message-cell.message-cell--main.is-editing * "))return;const{keyCode:n,ctrlKey:e,metaKey:r}=t;switch(n){case u.LEFT:e||r?d.first():d.prev(),t.preventDefault();break;case u.RIGHT:e||r?d.last():d.next(),t.preventDefault();break;case u.UP:if(e||r){d.up(),t.preventDefault();break}}}),o()(_),S(),function(){const t=o()(".p-breadcrumbs li:last-child a").first(),n=t.text(),e=`\n<a\n  href="${t.attr("href")}"\n  class="button--scroll button"\n  data-microtip-position="left"\n  aria-label="Go back to ${n}"\n  role="tooltip"\n  style="\n    position: fixed;\n    right: 20px;\n    bottom: 70px;\n"\n>\n  <span class="button-text">\n    <i class="fa--xf far fa-arrow-left" aria-hidden="true"></i>\n  </span>\n</a>;\n`;o()(e).appendTo(document.body)}(),function(){const t=o()('\n  <div class="p-nav next-navigation">\n    <div class="pageNavSimplePlaceHolder" />\n  </div>\n  ');o()(t).appendTo(document.body),t.find("div.pageNavSimplePlaceHolder").first().replaceWith(o()(".pageNavSimple").last())}()})}]);
